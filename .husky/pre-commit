#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "🔍 Running pre-commit checks..."

# Run TypeScript type checking
echo "🔎 Running TypeScript type checking..."
npm run typecheck

# Run linting
echo "🎨 Running ESLint..."
npm run lint

# Run formatting
echo "✨ Running formatting..."
npm run format

# Start dev server in background
echo "🚀 Starting development server..."
npm run dev & 
DEV_PID=$!

# Wait for dev server to start (adjust sleep time if needed)
sleep 10

# Run tests
echo "🧪 Running tests..."
npm run test

# Stop dev server
kill $DEV_PID

# Run build
echo "📦 Verifying production build..."
npm run build || exit 1

echo "✅ All checks passed!" 